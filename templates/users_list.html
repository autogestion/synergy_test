{% extends "base.html" %}
{% block content %}
    <script>
		showEditModal = function(userId) {
            $("#addModal").modal('show')
            $("#userId").val(userId)
		}
	</script>

    <h1>Synergy Way Users</h1>
        <form class="form-inline" action="/search/" method="GET">
           <div class="form-group">
               <input class="form-control" name="searchName" placeholder="John Doe">
           </div>
           <button type="submit" class="btn btn-default">Search</button>
           <div class="form-group">
             <button type="button" data-toggle="modal" data-target="#addModal" class="btn btn-default">Add</button>
           </div>
        </form>
        <table class="table table-striped table-bordered table-condensed">
			{% for user in users %}
			<tr>
				<td>{{ user.name }}</td>
				<td>{{ user.email }}</td>
				<td><a href="javascript:showEditModal({{user.id}})">Edit</a>/<a href="#addModal">View</a></td>
			</tr>
			{% endfor %}
		</table>

<div class="modal fade" id="addModal">
  <div class="modal-dialog">
    <div class="modal-content">
    
    <form class="well" method="post" id="addUserForm" action="edit">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Modal title</h4>
      </div>
      
      <div class="modal-body">
  <input type='hidden' id='userId' value='' name='user_id'> 
    </div>
    
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="submit" class="btn btn-primary">Save changes</button>
      </div>
      </form>
      
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<script>
  $('#addUserForm').submit(function() {
        $.ajax({ 
            type: $(this).attr('method'), 
            url: this.action, 
            data: $(this).serialize(),
            context: this,
            }
        });
        $("#userId").val('')
        return false;
    });
</script>        
                            

		
{% endblock %}
